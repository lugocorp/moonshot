#!/bin/bash
make bin/cli
[ "$?" == 1 ] && exit 1

tests=( $(ls testing/tests) )
for test in "${tests[@]}"; do
  echo "Test: $test"
  cat "testing/tests/$test" | ./bin/cli | lua5.3 > bin/custom.txt
  cat "testing/tests/$test" | lua5.3 > bin/vanilla.txt
  diff bin/custom.txt bin/vanilla.txt
  echo ""
done
